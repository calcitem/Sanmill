# Nine Men's Morris AlphaZero è®­ç»ƒç³»ç»Ÿ

```
python3 main.py --config my_config.yaml
python pit.py --gui --first human
```

æœ¬ç›®å½•å®ç°äº†ä¹å­æ£‹çš„ AlphaZero è®­ç»ƒä¸è¯„ä¼°ç³»ç»Ÿï¼Œæ”¯æŒï¼š

- ğŸ¯ **ç›‘ç£å­¦ä¹ **ï¼šä»å®Œç¾æ•°æ®åº“å¿«é€Ÿå­¦ä¹ æœ€ä¼˜ç­–ç•¥
- ğŸ”„ **å¼ºåŒ–å­¦ä¹ **ï¼šé€šè¿‡è‡ªå¯¹å¼ˆä¸æ–­æ”¹è¿›
- ğŸ† **æ··åˆè®­ç»ƒ**ï¼šç»“åˆç›‘ç£å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ çš„ä¼˜åŠ¿
- ğŸ® **å¤šç§å¯¹æˆ˜**ï¼šäººæœºå¯¹æˆ˜ã€AIè¯„ä¼°ã€å®Œç¾åº“æµ‹è¯•

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# ç¡®ä¿å¼•æ“å­˜åœ¨
ls /mnt/d/Repo/Sanmill/src/sanmill

# å‡†å¤‡å®Œç¾æ•°æ®åº“è·¯å¾„ï¼ˆWindows â†’ WSLï¼‰
# Windows: E:\Malom\Malom_Standard_Ultra-strong_1.1.0\Std_DD_89adjusted
# WSL:     /mnt/e/Malom/Malom_Standard_Ultra-strong_1.1.0/Std_DD_89adjusted
```

### 2. é…ç½®è®­ç»ƒå‚æ•°
```bash
# ç”Ÿæˆé…ç½®æ¨¡æ¿
python3 main.py --create-template

# å¤åˆ¶å¹¶ç¼–è¾‘é…ç½®
cp config_template.yaml my_config.yaml
# ç¼–è¾‘ my_config.yamlï¼Œä¿®æ”¹ teacherDBPath ä¸ºä½ çš„æ•°æ®åº“è·¯å¾„
```

### 3. å¼€å§‹è®­ç»ƒ
```bash
# ä½¿ç”¨é…ç½®æ–‡ä»¶è®­ç»ƒ
python3 main.py --config my_config.yaml

# æˆ–ç›´æ¥æŒ‡å®šè·¯å¾„
python3 main.py --config my_config.yaml \
  --engine /mnt/d/Repo/Sanmill/src/sanmill \
  --db /mnt/e/Malom/Malom_Standard_Ultra-strong_1.1.0/Std_DD_89adjusted
```

### 4. å¯¹æˆ˜ä½“éªŒ
```bash
# äººæœºå¯¹æˆ˜
python3 pit.py

# è¯„ä¼° AI å¯¹å®Œç¾åº“çš„è¡¨ç°
python3 pit.py --mode ai-vs-perfect --games 20 \
  --perfect-db /mnt/e/Malom/Malom_Standard_Ultra-strong_1.1.0/Std_DD_89adjusted
```

## ğŸ“‹ è®­ç»ƒæ¨¡å¼

### ğŸ¯ æ¨¡å¼ä¸€ï¼šç›‘ç£å­¦ä¹ ï¼ˆå¿«é€ŸåŸºçº¿ï¼‰
ä»å®Œç¾æ•°æ®åº“ç›´æ¥å­¦ä¹ ï¼Œå¿«é€Ÿè·å¾—å¼ºåŸºçº¿æ¨¡å‹ã€‚

**ç”¨é€”**ï¼š
- å¿«é€Ÿè·å¾—å¯ç”¨æ¨¡å‹ï¼ˆåˆ†é’Ÿçº§ï¼‰
- ä½œä¸ºå¼ºåŒ–å­¦ä¹ çš„é¢„è®­ç»ƒåŸºç¡€
- éªŒè¯ç½‘ç»œæ¶æ„å’Œè®­ç»ƒç®¡é“

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# ç›´æ¥è¿è¡Œ
python3 perfect_supervised.py -v

# è®¾ç½®æ ·æœ¬æ•°é‡
export SANMILL_PERFECT_TOTAL="5000"
python3 perfect_supervised.py -v

# æµ‹è¯•è®­ç»ƒç»“æœ
python3 pit.py --mode human-vs-ai
```

**è¾“å‡º**ï¼šä¿å­˜æ¨¡å‹ä¸º `./temp/best_epoch.pth.tar`

### ğŸ”„ æ¨¡å¼äºŒï¼šå¼ºåŒ–å­¦ä¹ ï¼ˆçº¯ AlphaZeroï¼‰
ä¼ ç»Ÿ AlphaZero è®­ç»ƒï¼šè‡ªå¯¹å¼ˆç”Ÿæˆæ•°æ® â†’ è®­ç»ƒç½‘ç»œ â†’ æ–°æ—§å¯¹æˆ˜è¯„ä¼°ã€‚

**é…ç½®ç¤ºä¾‹**ï¼š

```yaml
# config.yaml
numIters: 10
numEps: 50
usePerfectTeacher: false
load_model: false  # ä»é›¶å¼€å§‹
```

### ğŸ† æ¨¡å¼ä¸‰ï¼šæ··åˆè®­ç»ƒï¼ˆæ¨èï¼‰
ç»“åˆç›‘ç£å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ ï¼Œåœ¨æ¯è½® AlphaZero è®­ç»ƒä¸­æ··å…¥å®Œç¾åº“æ ·æœ¬ã€‚

**é…ç½®ç¤ºä¾‹**ï¼š
```yaml
# config.yaml
numIters: 10
numEps: 20
usePerfectTeacher: true
teacherExamplesPerIter: 1000
teacherDBPath: '/mnt/e/Malom/Malom_Standard_Ultra-strong_1.1.0/Std_DD_89adjusted'
pitAgainstPerfect: true
load_model: true  # åŸºäºç°æœ‰æ¨¡å‹
```

**ä¼˜åŠ¿**ï¼š
- æ›´å¿«æ”¶æ•›
- æ›´ç¨³å®šè®­ç»ƒ
- æ›´å¼ºæœ€ç»ˆæ£‹åŠ›

## ğŸ® å¯¹æˆ˜ä¸è¯„ä¼°

### äººæœºå¯¹æˆ˜
```bash
# åŸºç¡€å¯¹æˆ˜
python3 pit.py

# è‡ªå®šä¹‰éš¾åº¦å’Œå¼ºåº¦
python3 pit.py --mcts-sims 1000 --difficulty 0.8
```

**æ“ä½œè¯´æ˜**ï¼š
- æ”¾å­ï¼š`a1`, `d4` ç­‰
- ç§»å­ï¼š`a1-a4` æˆ– `a1a4`
- å–å­ï¼š`xd1` æˆ– `d1`
- åæ ‡ï¼ša-gï¼ˆåˆ—ï¼‰ï¼Œ1-7ï¼ˆè¡Œï¼‰

### AI è¯„ä¼°
```bash
# AI vs AI
python3 pit.py --mode ai-vs-ai --games 10

# AI vs å®Œç¾åº“ï¼ˆç»å¯¹å¼ºåº¦æµ‹è¯•ï¼‰
python3 pit.py --mode ai-vs-perfect --games 20 \
  --perfect-db /path/to/database

# äººç±»æŒ‘æˆ˜å®Œç¾åº“
python3 pit.py --mode human-vs-perfect \
  --perfect-db /path/to/database
```

**è¯„ä¼°æŒ‡æ ‡**ï¼š
- å¯¹å®Œç¾åº“ï¼š**å’Œæ£‹ç‡**æ˜¯å…³é”®ï¼ˆä¸å¯èƒ½è·èƒœï¼‰
- å…¸å‹æœŸæœ›ï¼šç›‘ç£æ¨¡å‹ 20-40%ï¼Œæ··åˆè®­ç»ƒæ¨¡å‹ 40-60%

## âš™ï¸ é…ç½®æ–‡ä»¶è¯¦è§£

### ğŸ“‹ å®Œæ•´å‚æ•°è¯´æ˜

#### ğŸ¯ è®­ç»ƒæ ¸å¿ƒå‚æ•°
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ | å»ºè®®é…ç½® |
|------|------|--------|------|----------|
| `numIters` | int | 100 | æ€»è®­ç»ƒè¿­ä»£æ¬¡æ•° | å¿«é€Ÿæµ‹è¯•ï¼š3ï¼›æ­£å¸¸ï¼š10-50ï¼›é•¿æœŸï¼š100+ |
| `numEps` | int | 100 | æ¯è½®è¿­ä»£çš„è‡ªå¯¹å¼ˆå±€æ•° | å¿«é€Ÿæµ‹è¯•ï¼š6ï¼›å¹³è¡¡ï¼š20-50ï¼›é«˜è´¨é‡ï¼š100+ |
| `tempThreshold` | int | 80 | æ¸©åº¦ç­–ç•¥åˆ‡æ¢ç‚¹ï¼ˆå¤šå°‘æ­¥åä»é‡‡æ ·å˜è´ªå©ªï¼‰ | é€šå¸¸ä¿æŒ 80ï¼Œæ§åˆ¶å‰æœŸæ¢ç´¢æ€§ |
| `updateThreshold` | float | 0.55 | æ–°æ¨¡å‹æ¥å—é˜ˆå€¼ï¼ˆèƒœç‡è¶…è¿‡æ­¤å€¼æ‰æ¥å—ï¼‰ | 0.55-0.6ï¼Œè¿‡é«˜éš¾æ¥å—æ–°æ¨¡å‹ |
| `maxlenOfQueue` | int | 200000 | ä¿ç•™çš„è®­ç»ƒæ ·æœ¬æœ€å¤§æ•°é‡ | å†…å­˜ä¸è¶³æ—¶å‡å°‘åˆ° 50000-100000 |
| `numMCTSSims` | int | 40 | æ¯æ­¥ MCTS æ¨¡æ‹Ÿæ¬¡æ•° | è¶Šé«˜è¶Šå¼ºä½†è¶Šæ…¢ï¼š20-100 |
| `arenaCompare` | int | 20 | æ–°æ—§æ¨¡å‹å¯¹æˆ˜å±€æ•° | å¿«é€Ÿæµ‹è¯•ï¼š4-10ï¼›å‡†ç¡®è¯„ä¼°ï¼š20+ |
| `cpuct` | float | 1.5 | UCB æ¢ç´¢å‚æ•° | é€šå¸¸ä¿æŒ 1.5ï¼Œæ§åˆ¶æ¢ç´¢ä¸åˆ©ç”¨å¹³è¡¡ |

#### ğŸ’¾ æ–‡ä»¶ç®¡ç†å‚æ•°
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ | å»ºè®®é…ç½® |
|------|------|--------|------|----------|
| `checkpoint` | string | './temp/' | æ¨¡å‹å’Œæ ·æœ¬ä¿å­˜ç›®å½• | å¯æ”¹ä¸ºå…¶ä»–è·¯å¾„ï¼Œå¦‚ './models/' |
| `load_model` | bool | false | æ˜¯å¦ä»æ£€æŸ¥ç‚¹æ¢å¤è®­ç»ƒ | trueï¼šç»§ç»­è®­ç»ƒï¼›falseï¼šé‡æ–°å¼€å§‹ |
| `load_folder_file` | list | ['temp/', 'best.pth.tar'] | åŠ è½½çš„æ¨¡å‹æ–‡ä»¶è·¯å¾„ | é€šå¸¸ä¿æŒé»˜è®¤ |
| `numItersForTrainExamplesHistory` | int | 5 | ä¿ç•™å‡ è½®å†å²è®­ç»ƒæ ·æœ¬ | 2-10ï¼Œå½±å“å†…å­˜ä½¿ç”¨å’Œè®­ç»ƒç¨³å®šæ€§ |

#### âš™ï¸ ç³»ç»Ÿè®¾ç½®å‚æ•°
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ | å»ºè®®é…ç½® |
|------|------|--------|------|----------|
| `num_processes` | int | 5 | è‡ªå¯¹å¼ˆå¹¶è¡Œè¿›ç¨‹æ•° | æ•™å¸ˆæ¨¡å¼ï¼š1ï¼›çº¯ AlphaZeroï¼š2-4 |
| `cuda` | bool | true | æ˜¯å¦ä½¿ç”¨ GPU | trueï¼šå¿«é€Ÿè®­ç»ƒï¼›falseï¼šç¨³å®šä½†æ…¢ |

#### ğŸ§  ç¥ç»ç½‘ç»œå‚æ•°
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ | å»ºè®®é…ç½® |
|------|------|--------|------|----------|
| `lr` | float | 0.002 | å­¦ä¹ ç‡ | å¿«é€Ÿæ”¶æ•›ï¼š0.005ï¼›ç¨³å®šï¼š0.002ï¼›å¾®è°ƒï¼š0.001 |
| `dropout` | float | 0.3 | Dropout æ­£åˆ™åŒ–ç‡ | 0.2-0.5ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ |
| `epochs` | int | 10 | æ¯è½®è¿­ä»£çš„è®­ç»ƒè½®æ•° | å¿«é€Ÿï¼š5ï¼›æ­£å¸¸ï¼š10ï¼›å……åˆ†ï¼š20 |
| `batch_size` | int | 1024 | è®­ç»ƒæ‰¹å¤§å° | å†…å­˜ä¸è¶³æ—¶å‡å°‘ï¼š256/512 |
| `num_channels` | int | 256 | ç½‘ç»œå®½åº¦ï¼ˆé€šé“æ•°ï¼‰ | å°ç½‘ç»œï¼š128ï¼›æ ‡å‡†ï¼š256ï¼›å¤§ç½‘ç»œï¼š512 |

#### ğŸ‘¨â€ğŸ« å®Œç¾æ•°æ®åº“æ•™å¸ˆå‚æ•°
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ | å»ºè®®é…ç½® |
|------|------|--------|------|----------|
| `usePerfectTeacher` | bool | false | æ˜¯å¦å¯ç”¨æ•™å¸ˆæ··åˆè®­ç»ƒ | **å¼ºçƒˆå»ºè®® true** |
| `teacherExamplesPerIter` | int | 0 | æ¯è½®è¿­ä»£æ•™å¸ˆæ ·æœ¬æ•° | å¿«é€Ÿï¼š100ï¼›å¹³è¡¡ï¼š1000ï¼›é‡åº¦ç›‘ç£ï¼š2000+ |
| `teacherBatch` | int | 256 | æ•™å¸ˆæ•°æ®é‡‡æ ·æ‰¹å¤§å° | é€šå¸¸ä¿æŒé»˜è®¤ |
| `teacherDBPath` | string | null | å®Œç¾æ•°æ®åº“è·¯å¾„ | **å¿…é¡»ä¿®æ”¹ä¸ºä½ çš„æ•°æ®åº“è·¯å¾„** |
| `teacherAnalyzeTimeout` | int | 120 | åˆ†æè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ | å¿«é€Ÿç£ç›˜ï¼š60ï¼›ç½‘ç»œå­˜å‚¨ï¼š300+ |
| `teacherThreads` | int | 1 | å¼•æ“çº¿ç¨‹æ•° | ä¿æŒ 1 ç¡®ä¿ç¨³å®šæ€§ |
| `pitAgainstPerfect` | bool | false | æ˜¯å¦æ¯è½®è¯„ä¼°å¯¹å®Œç¾åº“è¡¨ç° | **å»ºè®® true** è·Ÿè¸ªç»å¯¹è¿›åº¦ |

#### ğŸ› è°ƒè¯•ä¸æ—¥å¿—å‚æ•°
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ | å»ºè®®é…ç½® |
|------|------|--------|------|----------|
| `verbose_games` | int | 1 | æ¯è½®è¯¦ç»†è®°å½•çš„å¯¹å±€æ•° | è°ƒè¯•æ—¶å¢åŠ ï¼Œæ­£å¸¸è®­ç»ƒä¿æŒ 1 |
| `log_detailed_moves` | bool | true | æ˜¯å¦è®°å½•è¯¦ç»†èµ°æ³• | è°ƒè¯•æ—¶ trueï¼Œç”Ÿäº§æ—¶å¯è®¾ä¸º false |
| `enable_training_log` | bool | true | æ˜¯å¦ä¿å­˜è®­ç»ƒç»“æœåˆ°è¡¨æ ¼ | **å»ºè®® true**ï¼Œä¾¿äºåˆ†æè®­ç»ƒæ•ˆæœ |

### ğŸ¨ é…ç½®æ–‡ä»¶æ ¼å¼

**ç»Ÿä¸€ä½¿ç”¨ YAML æ ¼å¼**ï¼ˆæ”¯æŒæ³¨é‡Šï¼Œæ›´æ˜“è¯»ï¼‰ï¼š
- `config_template.yaml` - é€šç”¨é…ç½®æ¨¡æ¿ï¼ŒåŒ…å«æ‰€æœ‰åœºæ™¯è¯´æ˜

**é…ç½®æ–‡ä»¶ç‰¹ç‚¹**ï¼š
- âœ… **å•ä¸€æ–‡ä»¶**ï¼šæ‰€æœ‰åœºæ™¯çš„é…ç½®éƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­
- âœ… **è¯¦ç»†æ³¨é‡Š**ï¼šæ¯ä¸ªå‚æ•°éƒ½æœ‰è¯´æ˜å’Œä¸åŒåœºæ™¯çš„å»ºè®®å€¼
- âœ… **åœºæ™¯ç¤ºä¾‹**ï¼šæ–‡ä»¶åº•éƒ¨æœ‰ 6 ç§å¸¸è§è®­ç»ƒåœºæ™¯çš„é…ç½®è¯´æ˜
- âœ… **æ˜“äºå®šåˆ¶**ï¼šå¤åˆ¶ååªéœ€ä¿®æ”¹æ•°æ®åº“è·¯å¾„å³å¯ä½¿ç”¨

**ä¹Ÿæ”¯æŒ JSON æ ¼å¼**ï¼ˆå¦‚æœä½ æœ‰ç‰¹æ®Šéœ€æ±‚ï¼‰ï¼š
```bash
# ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«æ–‡ä»¶æ ¼å¼
python3 main.py --config my_config.json
```

### ğŸ”§ å¸¸è§é…ç½®åœºæ™¯

#### ğŸš€ åœºæ™¯ä¸€ï¼šå¿«é€Ÿæµ‹è¯•ï¼ˆéªŒè¯ç¯å¢ƒï¼‰
```yaml
numIters: 3
numEps: 6
teacherExamplesPerIter: 100
num_channels: 128
epochs: 5
usePerfectTeacher: true
teacherDBPath: '/mnt/e/Malom/Malom_Standard_Ultra-strong_1.1.0/Std_DD_89adjusted'
```

#### ğŸ¯ åœºæ™¯äºŒï¼šå¹³è¡¡è®­ç»ƒï¼ˆæ¨èæ–°æ‰‹ï¼‰
```yaml
numIters: 20
numEps: 30
teacherExamplesPerIter: 1000
num_channels: 256
usePerfectTeacher: true
num_processes: 1
teacherDBPath: '/mnt/e/Malom/Malom_Standard_Ultra-strong_1.1.0/Std_DD_89adjusted'
```

#### ğŸ† åœºæ™¯ä¸‰ï¼šé«˜è´¨é‡è®­ç»ƒï¼ˆè¿½æ±‚æ€§èƒ½ï¼‰
```yaml
numIters: 50
numEps: 100
teacherExamplesPerIter: 1000
num_channels: 512
numMCTSSims: 80
epochs: 15
teacherDBPath: '/mnt/e/Malom/Malom_Standard_Ultra-strong_1.1.0/Std_DD_89adjusted'
```

#### ğŸ”¬ åœºæ™¯å››ï¼šçº¯ AlphaZeroï¼ˆæ— æ•™å¸ˆï¼‰
```yaml
usePerfectTeacher: false
teacherExamplesPerIter: 0
num_processes: 3
numEps: 80
numIters: 100
```

#### ğŸ“š åœºæ™¯äº”ï¼šé‡åº¦ç›‘ç£å­¦ä¹ 
```yaml
teacherExamplesPerIter: 3000
numEps: 10
usePerfectTeacher: true
lr: 0.005
teacherDBPath: '/mnt/e/Malom/Malom_Standard_Ultra-strong_1.1.0/Std_DD_89adjusted'
```

### âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“è·¯å¾„**ï¼š`teacherDBPath` å¿…é¡»ä¿®æ”¹ä¸ºä½ çš„å®é™…è·¯å¾„
2. **å†…å­˜é™åˆ¶**ï¼šå¦‚é‡å†…å­˜ä¸è¶³ï¼Œå‡å°‘ `batch_size` å’Œ `maxlenOfQueue`
3. **è¿›ç¨‹æ•°**ï¼šä½¿ç”¨æ•™å¸ˆæ¨¡å¼æ—¶å»ºè®® `num_processes: 1`
4. **è¶…æ—¶è®¾ç½®**ï¼šç½‘ç»œå­˜å‚¨å¢åŠ  `teacherAnalyzeTimeout` è‡³ 300+
5. **æ¢å¤è®­ç»ƒ**ï¼šè®¾ç½® `load_model: true` å¯ä»ä¸­æ–­å¤„ç»§ç»­

## ğŸ”§ æ¨¡å‹ç®¡ç†

### æ–‡ä»¶è¯´æ˜
- `best.pth.tar` - ç«æŠ€åœºå† å†›æ¨¡å‹ï¼ˆç”¨äºå¯¹æˆ˜ï¼‰
- `best_epoch.pth.tar` - å•æ¬¡è®­ç»ƒæœ€ä½³æ¨¡å‹
- `checkpoint_x.pth.tar.examples` - è®­ç»ƒæ ·æœ¬å†å²

### è®­ç»ƒæ¢å¤
ç³»ç»Ÿè‡ªåŠ¨æ”¯æŒè®­ç»ƒä¸­æ–­æ¢å¤ï¼š
```bash
# ç›´æ¥é‡æ–°è¿è¡Œç›¸åŒå‘½ä»¤å³å¯ç»§ç»­
python3 main.py --config my_config.yaml
```

### æ–‡ä»¶ç®¡ç†ç­–ç•¥
```bash
# å¤‡ä»½ç°æœ‰æ¨¡å‹
mkdir -p temp/backup_$(date +%Y%m%d_%H%M%S)
mv temp/*.pth.tar* temp/backup_*/

# ä»é›¶å¼€å§‹ï¼šè®¾ç½®é…ç½®æ–‡ä»¶ä¸­ load_model: false
# ç»§ç»­è®­ç»ƒï¼šè®¾ç½®é…ç½®æ–‡ä»¶ä¸­ load_model: trueï¼ˆé»˜è®¤ï¼‰
```

## ğŸ“š è¿›é˜¶ä½¿ç”¨

### ğŸ“Š è®­ç»ƒç»“æœè®°å½•ä¸åˆ†æ

ç³»ç»Ÿä¼šè‡ªåŠ¨è®°å½•æ¯è½®è®­ç»ƒçš„æ•ˆæœåˆ°è¡¨æ ¼æ–‡ä»¶ï¼š

**è®°å½•å†…å®¹**ï¼š
- è®­ç»ƒå‚æ•°ï¼šè¿­ä»£æ¬¡æ•°ã€è‡ªå¯¹å¼ˆå±€æ•°ã€æ•™å¸ˆæ ·æœ¬æ•°
- æ€§èƒ½æŒ‡æ ‡ï¼šèƒœç‡ã€å’Œæ£‹ç‡ã€æ¨¡å‹æ¥å—æƒ…å†µ
- æ—¶é—´ç»Ÿè®¡ï¼šæ¯è½®è€—æ—¶ã€ç´¯è®¡æ—¶é—´
- å®Œç¾åº“è¯„ä¼°ï¼šå¯¹å®Œç¾æ•°æ®åº“çš„è¡¨ç°

**è¾“å‡ºæ–‡ä»¶**ï¼š
```bash
temp/
â”œâ”€â”€ training_teacher_iter10_eps20_1210_1430_log.csv  # CSVè¡¨æ ¼
â”œâ”€â”€ training_teacher_iter10_eps20_1210_1430_log.json # JSONè¯¦ç»†æ•°æ®
â”œâ”€â”€ best.pth.tar                                      # æœ€ä½³æ¨¡å‹
â””â”€â”€ checkpoint_x.pth.tar.examples                    # è®­ç»ƒæ ·æœ¬
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
# æŸ¥çœ‹è®­ç»ƒç»“æœè¡¨æ ¼
cat temp/*_log.csv | head -10

# åœ¨Excelä¸­åˆ†æè®­ç»ƒè¿›åº¦
open temp/*_log.csv

# æ§åˆ¶æ—¥å¿—è®°å½•ï¼ˆé…ç½®æ–‡ä»¶ä¸­ï¼‰
enable_training_log: true   # å¯ç”¨è®°å½•
enable_training_log: false  # ç¦ç”¨è®°å½•
```

**ğŸ“ æ–‡ä»¶ç®¡ç†è¯´æ˜**ï¼š
- æ‰€æœ‰è®­ç»ƒäº§ç”Ÿçš„æ–‡ä»¶å·²é…ç½®åœ¨ `.gitignore` ä¸­
- æ¨¡å‹æ–‡ä»¶ (`*.pth.tar`)ã€è®­ç»ƒæ ·æœ¬ (`*.examples`)ã€æ—¥å¿—æ–‡ä»¶ (`*_log.csv/json`) ä¸ä¼šè¢«æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- ç”¨æˆ·é…ç½®æ–‡ä»¶ (`my_config.yaml`) ä¹Ÿä¼šè¢«å¿½ç•¥ï¼Œé¿å…ä¸ªäººé…ç½®å†²çª
- åªæœ‰æ¨¡æ¿æ–‡ä»¶ (`config_template.*`) ä¼šè¢«ç‰ˆæœ¬æ§åˆ¶

**è¡¨æ ¼å­—æ®µè¯´æ˜**ï¼š
| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|------|------|--------|
| `iteration` | è¿­ä»£è½®æ¬¡ | 1, 2, 3... |
| `win_rate` | æ–°æ¨¡å‹èƒœç‡ | 0.650 |
| `model_accepted` | æ˜¯å¦æ¥å—æ–°æ¨¡å‹ | æ˜¯/å¦ |
| `perfect_draw_rate` | å¯¹å®Œç¾åº“å’Œæ£‹ç‡ | 0.450 |
| `iteration_time` | æœ¬è½®è€—æ—¶(ç§’) | 1200.5 |
| `notes` | è®­ç»ƒæ¨¡å¼ | æ•™å¸ˆæ¨¡å¼/çº¯AlphaZero |

### è®­ç»ƒç­–ç•¥å»ºè®®
1. **æ–°ç”¨æˆ·**ï¼šç›‘ç£å­¦ä¹  â†’ æ··åˆè®­ç»ƒ â†’ äººæœºå¯¹æˆ˜
2. **å¿«é€ŸéªŒè¯**ï¼šé…ç½®æ–‡ä»¶è®¾ç½®å°å‚æ•°è¿›è¡Œæµ‹è¯•
3. **é«˜è´¨é‡è®­ç»ƒ**ï¼šç›‘ç£é¢„è®­ç»ƒ + é•¿æœŸæ··åˆè®­ç»ƒ
4. **æ€§èƒ½è°ƒä¼˜**ï¼šå¢åŠ  `numIters`ã€`teacherExamplesPerIter`

### å‚æ•°è°ƒä¼˜æŒ‡å—
- **æå‡è®­ç»ƒæ•ˆæœ**ï¼šå¢åŠ  `numIters`ã€`numEps`ã€`teacherExamplesPerIter`
- **æå‡ AI å¼ºåº¦**ï¼šå¢åŠ  `--mcts-sims`ï¼ˆå¯¹æˆ˜æ—¶ï¼‰
- **åŠ é€Ÿè®­ç»ƒ**ï¼šå‡å°‘ `numEps`ï¼Œä½¿ç”¨ CPU æ¨¡å¼
- **ç¨³å®šè®­ç»ƒ**ï¼š`num_processes: 1`ï¼Œé€‚å½“çš„ `teacherAnalyzeTimeout`

### ç¯å¢ƒå˜é‡è¦†ç›–
```bash
# å¼ºåˆ¶ CPU æ¨¡å¼
SANMILL_TRAIN_CUDA=0 python3 main.py --config my_config.yaml

# è°ƒæ•´è¿›ç¨‹æ•°
SANMILL_TRAIN_PROCESSES=2 python3 main.py --config my_config.yaml

# è®¾ç½®å®Œç¾åº“è·¯å¾„
SANMILL_PERFECT_DB=/path/to/db python3 perfect_supervised.py
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **å®Œç¾åº“æœªåŠ è½½**
   - æ£€æŸ¥è·¯å¾„æ ¼å¼ï¼ˆWSL è·¯å¾„ï¼‰
   - å¢åŠ  `teacherAnalyzeTimeout`ï¼ˆå»ºè®® 120-300 ç§’ï¼‰
   - ç¡®è®¤ `teacherThreads: 1`

2. **è®­ç»ƒä¸­æ–­**
   - ç›´æ¥é‡æ–°è¿è¡Œç›¸åŒå‘½ä»¤
   - æ£€æŸ¥ç£ç›˜ç©ºé—´
   - æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

3. **æ¨¡å‹æ€§èƒ½å·®**
   - å¢åŠ è®­ç»ƒæ ·æœ¬æ•°
   - æ£€æŸ¥å®Œç¾åº“æ˜¯å¦æ­£ç¡®åŠ è½½
   - å°è¯•ç›‘ç£é¢„è®­ç»ƒ

### è°ƒè¯•å·¥å…·
```bash
# è¯¦ç»†æ—¥å¿—
python3 perfect_supervised.py -v

# æµ‹è¯•é…ç½®ç”Ÿæˆ
python3 main.py --create-template

# æ£€æŸ¥æ¨¡å‹æ–‡ä»¶
ls -la temp/

# éªŒè¯é…ç½®æ–‡ä»¶
python3 -c "import yaml; print(yaml.safe_load(open('my_config.yaml')))"
```

## ğŸ“– æŠ€æœ¯ç»†èŠ‚

### å®Œç¾æ•°æ®åº“ç›®æ ‡æ„é€ 
- **ç­–ç•¥å¤´ `pi`**ï¼šå¯¹æœ€ä¼˜ç€æ³•é›†åˆå‡åŒ€åˆ†å¸ƒï¼ˆæœ‰èµ¢é€‰èµ¢ï¼Œæ— èµ¢é€‰å’Œï¼Œå…¨è¾“é€‰æ…¢è¾“ï¼‰
- **ä»·å€¼å¤´ `v`**ï¼šWDL æ˜ å°„ +1/0/-1ï¼Œç”¨æ­¥æ•°åšè½»å¾®è°ƒæ•´ï¼ˆå¿«èµ¢>æ…¢èµ¢ï¼Œæ…¢è¾“>å¿«è¾“ï¼‰
- **æ•°æ®å¢å¼º**ï¼šä½¿ç”¨å¯¹ç§°æ€§æ‰©å……æ ·æœ¬

### ç½‘ç»œæ¶æ„
- å¤šå¤´è®¾è®¡ï¼šä¸åŒæ¸¸æˆé˜¶æ®µä½¿ç”¨ä¸åŒè¾“å‡ºå¤´
- Period è·¯ç”±ï¼šplacing/moving/flying/capture åˆ†åˆ«å¤„ç†
- æ”¯æŒ CUDA å’Œ CPU æ¨¡å¼

## ğŸ¯ å‘½ä»¤é€ŸæŸ¥

```bash
# ç”Ÿæˆé…ç½®
python3 main.py --create-template

# æ··åˆè®­ç»ƒï¼ˆæ¨èï¼‰
python3 main.py --config config_examples/teacher_training.yaml \
  --engine /path/to/sanmill --db /path/to/database

# ç›‘ç£å­¦ä¹ 
python3 perfect_supervised.py -v

# äººæœºå¯¹æˆ˜
python3 pit.py

# AI è¯„ä¼°
python3 pit.py --mode ai-vs-perfect --games 20 --perfect-db /path/to/db

# AI vs AI
python3 pit.py --mode ai-vs-ai --games 10
```

## ğŸ”— ç›¸å…³æ–‡ä»¶

- `main.py` - ä¸»è®­ç»ƒå…¥å£
- `perfect_supervised.py` - ç›‘ç£å­¦ä¹ 
- `pit.py` - ç»Ÿä¸€å¯¹æˆ˜è„šæœ¬
- `config.py` - é…ç½®æ–‡ä»¶æ”¯æŒ
- `create_configs.py` - é…ç½®æ¨¡æ¿ç”Ÿæˆ
- `Coach.py` - è®­ç»ƒå¾ªç¯
- `game/` - æ¸¸æˆè§„åˆ™å’Œç½‘ç»œæ¶æ„